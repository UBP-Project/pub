{% extends "./layout/client_base.html" %}

{% block title %} {{ user['firstname'] }} {{ user['lastname'] }} {% endblock title %}

{% block content %}
    <div class="row">
        <div class="col-md-3" style="position: absolute; z-index: 2; top: 200px; margin: 15px;">
            {% if user.image %}
                <img id="dp" src="{{ url_for('static', filename='uploads/profile_pictures/' + user.image) }}"
                    width="200px" 
                    height="200x"
                    style="border: 5px solid white; border-radius: 10px; cursor: pointer; object-fit: cover"/>
            {% else %}
                <img id="dp" src="{{ url_for('static', filename='images/pub-default-img.jpg') }}"
                    width="200px" 
                    height="200x"
                    style="border: 5px solid white; border-radius: 10px; cursor: pointer; object-fit: cover;"/>
            {% endif %}
        </div>

        <div class="col-md-12 text-right" style="background-color: white; padding: 0px;">
            <!-- Check if user has set cover photo
            <img src="{{ url_for('static', filename='images/building.png') }}"
                style="width: 100%; height: 250px; z-index: 1;"/> -->

            <!-- hold the trianlify cover photo -->
            <div id="trianglify-cover" class="col-md-12 text-right" style="height: 250px; background-color: white; padding: 0px;">
            </div>


                
            </div>
        </div>

        <form class="col-md-offset-3 col-md-9" method="post" name="update_user" style="background-color: white; padding-bottom: 30px;" enctype="multipart/form-data">
            {{ form.hidden_tag() }}
            <br /><br /><br />
            <div class="row">
                <div class="col-md-12">
                    <h3>Edit Profile</h3>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <label>Firstname</label>
                    {{ form.firstname(
                    placeholder="First name",
                    class="form-control") }}
                </div>
                <div class="col-md-3">
                    <label>Middlename</label>
                    {{ form.middlename(
                    placeholder="Middle name",
                    class="form-control") }}
                </div>
                <div class="col-md-3">
                    <label>Lastname</label>
                    {{ form.lastname(
                    placeholder="Last name",
                    class="form-control") }}
                </div>
            </div>

            <br />
            
            <div class="row">
                <div class="col-md-5">
                    <label>Department</label>
                    {{ form.department(
                        placeholder="Department",
                        class="form-control"
                    )}}
                </div>
                <div class="col-md-4">
                    <label>Position</label>
                    {{ form.position(
                        placeholder="Position",
                        class="form-control"
                    )}}
                </div>
            </div>

            <br />

            <div class="col-md-5">
                <label>Email</label>
                {{ form.email(
                    placeholder="Email",
                    class="form-control") }}
            </div>
            <div class="col-md-4">
                <label>Birthday</label>
                {{ form.birthday(
                    placeholder="Birthday",
                    class="form-control")}}
            </div>

            <br />

            <div class="col-md-6">
                <br />
                <a href="{{ url_for('client.edit_password', id=user['id']) }}">
                    Change Password
                </a>
            </div>

            <div class="col-md-3">
                <br />
                {{ form.submit(
                    class="btn btn-style-1 pull-right"
                )}}
            </div>
            {{ form.image(style="display: none") }}
        </form>

    </div>

    <br /><br /><br />

{% endblock content %}

{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/trianglify/0.4.0/trianglify.min.js"></script>
    <script>
        var pattern = Trianglify({
            width: $("#trianglify-cover").width(),
            height: $("#trianglify-cover").height(),
            seed: "{{ user['id'] }}"
        });
        $("#trianglify-cover").append(pattern.svg());

        $("#dp").on('click', function(e) {
            e.preventDefault();
            $("#image").trigger('click');
        });
    </script>
    <script src="{{ url_for('static', filename='js/client/profile.js') }}"></script>
{% endblock scripts %}