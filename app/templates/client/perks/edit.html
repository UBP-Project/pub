{% extends "./layout/client_base.html" %}

{% block title %} {{ perk.title }} {% endblock title %}

{% block content %}

	<div class="row">

		<div class="col-md-12">
			<div class="group-box">

				<h3>EDIT PERKS - <span style="color: #aaa;">{{ perk.title }}</span>
					<a href="/perks/manage">
                        <button class="btn btn-style-4 btn-sm pull-right" title="Back To Manage Perks">Cancel</button>
                    </a>
                </h3>
				<hr/><br/>

			    <form class="row admin-form activity-form" style="padding: 0px" method="post" enctype="multipart/form-data" name="create_perk">
			        {{ form.hidden_tag() }}

			        <div class="col-md-6">
                        {{ form.hidden_tag() }}
                        <div>
                            <h4>Title</h4>
			                {{ form.title(
			                    placeholder="Perks Title",
			                    class="form-control",
			                    required="true") }}
			            </div>
			            <br/>
			            <div>
                            <h4>Description</h4>
			                {{ form.description(
			                    placeholder="Perks description",
			                    class="form-control input-md",
			                    required="true") }}
						</div>
					</div>

					<div class="col-md-6 no-padding-right" style="padding: 0px;">
			            <div class="img-upload text-center">
			                <br />
			                    {% if perk.image %}
			                        <img id="preview" src="{{ url_for('static', filename='uploads/perks_images/' + perk.image) }}" style="height: 300px;"/>
			                    {% else %}
			                        <img id="preview" src="{{ url_for('static', filename='images/pub-default-img.jpg') }}" style="height: 300px;"/>
			                    {% endif %}
			                    <div id="upload-btn" class="text">
			                        <button class="btn btn-style-1">Choose Perk's Image</button>
			                    </div>
			                    {{ form.image(
			                        placeholder="Perks Image",
			                    )}}
			            </div>
			        </div>

					<br/><br/>
					<div class="col-md-12">
						<br/><br/>
                        {{ form.submit(
                            placeholder="Submit",
                            class="btn btn-style-1",
                            value="Update Perks"
                        )}}
                        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#delete-confirmation">
			            Delete Perks</button>
                    </div>

			    </form>

			    <!-- Delete Activity confirmation modal -->
			    <form method="post" class="modal fade" id="delete-confirmation" role="dialog" aria-hidden="true">
			        <div class="modal-dialog modal-sm">

			            <div class="modal-content">
			                <div class="modal-header">
			                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			                    <h4 class="modal-title" id="myModalLabel">UBP : Pub</h4>
			                </div>
			                <div class="modal-body">
			                    <p class="text-center">Are you sure you want to delete this perks? <b>{{ perk.title }}</b></p>
			                </div>
			                <div class="modal-footer">
			                    <div class="pull-left text-center">
			                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
			                    </div>
			                    <div class="pull-right text-center">
			                        <button type="submit" name="delete" value="delete" class="btn btn-danger">DELETE</button>
			                    </div>
			                </div>
			            </div>

			        </div>
			    </form>

			    <br/>
    		</div>
    	</div>

    </div>

{% endblock %}

{% block scripts %}
    <script>
        $(document).ready(function() {
            $("#image").on('change', function() {
                var reader = new FileReader();
                 reader.onload = function()
                 {
                  var output = document.getElementById('preview');
                  output.src = reader.result;
                 }
                 reader.readAsDataURL(event.target.files[0]);
            });

            $("#preview").on('click', function() {
                $("#image").trigger('click');
            });

            $("#upload-btn").on('click', function(e) {
                e.preventDefault();
                $("#image").trigger('click');
            });

        });
    </script>
{% endblock %}